{
    "sourceFile": "database.rules.json",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1748026603618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748062212727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,27 @@\n {\r\n   \"rules\": {\r\n     \".read\": \"auth != null\",\r\n-    \".write\": false,\r\n+    \".write\": \"auth != null\",\r\n+    \"notifications\": {\r\n+      \"$uid\": {\r\n+        \".read\": \"$uid === auth.uid\",\r\n+        \".write\": \"$uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin'\"\r\n+      }\r\n+    },\r\n+    \"users\": {\r\n+      \"$uid\": {\r\n+        \"notifications\": {\r\n+          \".read\": \"$uid === auth.uid\",\r\n+          \".write\": \"$uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin'\"\r\n+        }\r\n+      }\r\n+    },\r\n     \"complaintRequests\": {\r\n-      \".indexOn\": [\"studentId\", \"status\", \"submittedAt\"],\r\n-      \".read\": \"auth != null\",\r\n-      \"$complaintId\": {\r\n-        \".read\": \"auth != null && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())\",\r\n-        \".write\": \"auth != null && ((!data.exists() && newData.child('studentId').val() === auth.uid) || (data.exists() && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())))\"\r\n+      \".indexOn\": [\"studentId\"],\r\n+      \"$complaint\": {\r\n+        \".read\": \"auth != null\",\r\n+        \".write\": \"auth != null\"\r\n       }\r\n     },\r\n     \"budget_requests\": {\r\n       \".indexOn\": [\"studentId\", \"userId\", \"status\", \"createdAt\"],\r\n"
                },
                {
                    "date": 1748062618278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,124 +2,37 @@\n   \"rules\": {\r\n     \".read\": \"auth != null\",\r\n     \".write\": \"auth != null\",\r\n     \"notifications\": {\r\n-      \"$uid\": {\r\n-        \".read\": \"$uid === auth.uid\",\r\n-        \".write\": \"$uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin'\"\r\n-      }\r\n-    },\r\n-    \"users\": {\r\n-      \"$uid\": {\r\n-        \"notifications\": {\r\n-          \".read\": \"$uid === auth.uid\",\r\n-          \".write\": \"$uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin'\"\r\n-        }\r\n-      }\r\n-    },\r\n-    \"complaintRequests\": {\r\n-      \".indexOn\": [\"studentId\"],\r\n-      \"$complaint\": {\r\n-        \".read\": \"auth != null\",\r\n-        \".write\": \"auth != null\"\r\n-      }\r\n-    },\r\n-    \"budget_requests\": {\r\n-      \".indexOn\": [\"studentId\", \"userId\", \"status\", \"createdAt\"],\r\n-      \"$request_id\": {\r\n-        \".read\": \"auth != null\",\r\n-        \".write\": \"auth != null\"\r\n-      }\r\n-    },\r\n-    \"notifications\": {\r\n-      \".indexOn\": [\"studentId\", \"createdAt\", \"status\"],\r\n+      \".indexOn\": [\"userId\", \"createdAt\", \"status\"],\r\n       \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n       \"$notificationId\": {\r\n-        \".read\": \"auth != null\",\r\n-        \".write\": \"auth != null && ((!data.exists()) || (data.exists() && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())))\"\r\n+        \".validate\": \"newData.hasChildren(['message', 'createdAt', 'userId'])\"\r\n       }\r\n     },\r\n-    \"facility_bookings\": {\r\n-      \".indexOn\": [\"studentId\"],\r\n-      \".read\": \"auth != null\",\r\n-      \".write\": \"auth != null\"\r\n-    },\r\n-    \"applications\": {\r\n-      \".indexOn\": [\"studentId\"],\r\n-      \".read\": \"auth != null\",\r\n-      \".write\": \"auth != null\"\r\n-    },\r\n-    \"feedback\": {\r\n-      \".indexOn\": [\"studentId\"],\r\n-      \".read\": \"auth != null\",\r\n-      \".write\": \"auth != null\"\r\n-    },\r\n-    \"facilityBookingRequests\": {\r\n-      \".indexOn\": \"userId\",\r\n-      \".read\": \"auth != null\",\r\n-      \".write\": \"auth != null\",\r\n-      \"$booking_id\": {\r\n-        \".validate\": \"newData.hasChildren(['userId', 'status', 'createdAt'])\",\r\n-        \"userId\": {\r\n-          \".validate\": \"newData.isString()\"\r\n-        },\r\n-        \"status\": {\r\n-          \".validate\": \"newData.isString() && (newData.val() === 'pending' || newData.val() === 'approved' || newData.val() === 'rejected')\"\r\n-        }\r\n-      }\r\n-    },\r\n-    \"facility-booking-requests\": {\r\n-      \".indexOn\": [\"userId\", \"status\", \"createdAt\", \"recipient\"],\r\n-      \"$booking_id\": {\r\n-        \".read\": \"auth != null\",\r\n-        \".write\": \"auth != null\"\r\n-      }\r\n-    },\r\n-    \"facilities\": {\r\n-      \".read\": true,\r\n-      \".write\": \"auth != null && root.child('users').child(auth.uid).child('role').val() == 'admin'\"\r\n-    },\r\n-    \"election_candidates\": {\r\n-      \".indexOn\": [\"status\"],\r\n-      \"$candidate_id\": {\r\n-        \".read\": \"auth != null\",\r\n-        \".write\": \"auth != null\"\r\n-      }\r\n-    },\r\n-    \"votes\": {\r\n-      \"$electionId\": {\r\n-        \".indexOn\": [\"candidateId\", \"timestamp\"]\r\n-      }\r\n-    },\r\n     \"users\": {\r\n       \"$userId\": {\r\n         \".read\": \"auth != null && $userId === auth.uid\",\r\n         \".write\": \"auth != null && $userId === auth.uid\",\r\n-        \"complaints\": {\r\n-          \".read\": \"auth != null && $userId === auth.uid\",\r\n-          \".write\": \"auth != null && $userId === auth.uid\",\r\n-          \"$complaintId\": {\r\n-            \".validate\": \"newData.hasChildren(['id', 'status', 'submittedAt'])\"\r\n-          }\r\n-        },\r\n         \"notifications\": {\r\n+          \".indexOn\": [\"createdAt\", \"read\"],\r\n           \".read\": \"auth != null && $userId === auth.uid\",\r\n-          \".write\": \"auth != null && $userId === auth.uid\",\r\n-          \"$notificationId\": {\r\n-            \".validate\": \"newData.hasChildren(['type', 'message', 'createdAt'])\"\r\n-          }\r\n+          \".write\": \"auth != null && ($userId === auth.uid || root.child('admins').child(auth.uid).exists())\"\r\n         }\r\n       }\r\n     },\r\n-    \"faculty\": {\r\n-      \"$uid\": {\r\n-        \".read\": \"auth != null && ($uid === auth.uid || root.child('admins').child(auth.uid).exists())\",\r\n-        \".write\": \"auth != null && (root.child('admins').child(auth.uid).exists() || $uid === auth.uid)\"\r\n+    \"complaintRequests\": {\r\n+      \".indexOn\": [\"studentId\", \"status\", \"createdAt\"],\r\n+      \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n+      \"$complaintId\": {\r\n+        \".validate\": \"newData.hasChildren(['studentId', 'status', 'submittedAt'])\"\r\n       }\r\n     },\r\n     \"admins\": {\r\n       \"$uid\": {\r\n-        \".read\": \"auth != null && ($uid === auth.uid || root.child('admins').child(auth.uid).exists())\",\r\n+        \".read\": \"auth != null\",\r\n         \".write\": \"auth != null && root.child('admins').child(auth.uid).exists()\"\r\n       }\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1748062800886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,39 @@\n+{\r\n+  \"rules\": {\r\n+    \".read\": \"auth != null\",\r\n+    \".write\": \"auth != null\",\r\n+    \"notifications\": {\r\n+      \".indexOn\": [\"userId\", \"createdAt\", \"status\"],\r\n+      \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n+      \"$notificationId\": {\r\n+        \".validate\": \"newData.hasChildren(['message', 'createdAt', 'userId'])\"\r\n+      }\r\n+    },\r\n+    \"users\": {\r\n+      \"$userId\": {\r\n+        \".read\": \"auth != null && $userId === auth.uid\",\r\n+        \".write\": \"auth != null && $userId === auth.uid\",\r\n+        \"notifications\": {\r\n+          \".indexOn\": [\"createdAt\", \"read\"],\r\n+          \".read\": \"auth != null && $userId === auth.uid\",\r\n+          \".write\": \"auth != null && ($userId === auth.uid || root.child('admins').child(auth.uid).exists())\"\r\n+        }\r\n+      }\r\n+    },\r\n+    \"complaintRequests\": {\r\n+      \".indexOn\": [\"studentId\", \"status\", \"createdAt\"],\r\n+      \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n+      \"$complaintId\": {\r\n+        \".validate\": \"newData.hasChildren(['studentId', 'status', 'submittedAt'])\"\r\n+      }\r\n+    },\r\n+    \"admins\": {\r\n+      \"$uid\": {\r\n+        \".read\": \"auth != null\",\r\n+        \".write\": \"auth != null && root.child('admins').child(auth.uid).exists()\"\r\n+      }\r\n+    }\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1748062887287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,39 @@\n+{\r\n+  \"rules\": {\r\n+    \".read\": \"auth != null\",\r\n+    \".write\": \"auth != null\",\r\n+    \"notifications\": {\r\n+      \".indexOn\": [\"userId\", \"createdAt\", \"status\"],\r\n+      \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n+      \"$notificationId\": {\r\n+        \".validate\": \"newData.hasChildren(['message', 'createdAt', 'userId'])\"\r\n+      }\r\n+    },\r\n+    \"users\": {\r\n+      \"$userId\": {\r\n+        \".read\": \"auth != null && $userId === auth.uid\",\r\n+        \".write\": \"auth != null && $userId === auth.uid\",\r\n+        \"notifications\": {\r\n+          \".indexOn\": [\"createdAt\", \"read\"],\r\n+          \".read\": \"auth != null && $userId === auth.uid\",\r\n+          \".write\": \"auth != null && ($userId === auth.uid || root.child('admins').child(auth.uid).exists())\"\r\n+        }\r\n+      }\r\n+    },\r\n+    \"complaintRequests\": {\r\n+      \".indexOn\": [\"studentId\", \"status\", \"createdAt\"],\r\n+      \".read\": \"auth != null\",\r\n+      \".write\": \"auth != null\",\r\n+      \"$complaintId\": {\r\n+        \".validate\": \"newData.hasChildren(['studentId', 'status', 'submittedAt'])\"\r\n+      }\r\n+    },\r\n+    \"admins\": {\r\n+      \"$uid\": {\r\n+        \".read\": \"auth != null\",\r\n+        \".write\": \"auth != null && root.child('admins').child(auth.uid).exists()\"\r\n+      }\r\n+    }\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1748026603618,
            "name": "Commit-0",
            "content": "{\r\n  \"rules\": {\r\n    \".read\": \"auth != null\",\r\n    \".write\": false,\r\n    \"complaintRequests\": {\r\n      \".indexOn\": [\"studentId\", \"status\", \"submittedAt\"],\r\n      \".read\": \"auth != null\",\r\n      \"$complaintId\": {\r\n        \".read\": \"auth != null && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())\",\r\n        \".write\": \"auth != null && ((!data.exists() && newData.child('studentId').val() === auth.uid) || (data.exists() && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())))\"\r\n      }\r\n    },\r\n    \"budget_requests\": {\r\n      \".indexOn\": [\"studentId\", \"userId\", \"status\", \"createdAt\"],\r\n      \"$request_id\": {\r\n        \".read\": \"auth != null\",\r\n        \".write\": \"auth != null\"\r\n      }\r\n    },\r\n    \"notifications\": {\r\n      \".indexOn\": [\"studentId\", \"createdAt\", \"status\"],\r\n      \".read\": \"auth != null\",\r\n      \"$notificationId\": {\r\n        \".read\": \"auth != null\",\r\n        \".write\": \"auth != null && ((!data.exists()) || (data.exists() && (data.child('studentId').val() === auth.uid || root.child('faculty').child(auth.uid).exists() || root.child('admins').child(auth.uid).exists())))\"\r\n      }\r\n    },\r\n    \"facility_bookings\": {\r\n      \".indexOn\": [\"studentId\"],\r\n      \".read\": \"auth != null\",\r\n      \".write\": \"auth != null\"\r\n    },\r\n    \"applications\": {\r\n      \".indexOn\": [\"studentId\"],\r\n      \".read\": \"auth != null\",\r\n      \".write\": \"auth != null\"\r\n    },\r\n    \"feedback\": {\r\n      \".indexOn\": [\"studentId\"],\r\n      \".read\": \"auth != null\",\r\n      \".write\": \"auth != null\"\r\n    },\r\n    \"facilityBookingRequests\": {\r\n      \".indexOn\": \"userId\",\r\n      \".read\": \"auth != null\",\r\n      \".write\": \"auth != null\",\r\n      \"$booking_id\": {\r\n        \".validate\": \"newData.hasChildren(['userId', 'status', 'createdAt'])\",\r\n        \"userId\": {\r\n          \".validate\": \"newData.isString()\"\r\n        },\r\n        \"status\": {\r\n          \".validate\": \"newData.isString() && (newData.val() === 'pending' || newData.val() === 'approved' || newData.val() === 'rejected')\"\r\n        }\r\n      }\r\n    },\r\n    \"facility-booking-requests\": {\r\n      \".indexOn\": [\"userId\", \"status\", \"createdAt\", \"recipient\"],\r\n      \"$booking_id\": {\r\n        \".read\": \"auth != null\",\r\n        \".write\": \"auth != null\"\r\n      }\r\n    },\r\n    \"facilities\": {\r\n      \".read\": true,\r\n      \".write\": \"auth != null && root.child('users').child(auth.uid).child('role').val() == 'admin'\"\r\n    },\r\n    \"election_candidates\": {\r\n      \".indexOn\": [\"status\"],\r\n      \"$candidate_id\": {\r\n        \".read\": \"auth != null\",\r\n        \".write\": \"auth != null\"\r\n      }\r\n    },\r\n    \"votes\": {\r\n      \"$electionId\": {\r\n        \".indexOn\": [\"candidateId\", \"timestamp\"]\r\n      }\r\n    },\r\n    \"users\": {\r\n      \"$userId\": {\r\n        \".read\": \"auth != null && $userId === auth.uid\",\r\n        \".write\": \"auth != null && $userId === auth.uid\",\r\n        \"complaints\": {\r\n          \".read\": \"auth != null && $userId === auth.uid\",\r\n          \".write\": \"auth != null && $userId === auth.uid\",\r\n          \"$complaintId\": {\r\n            \".validate\": \"newData.hasChildren(['id', 'status', 'submittedAt'])\"\r\n          }\r\n        },\r\n        \"notifications\": {\r\n          \".read\": \"auth != null && $userId === auth.uid\",\r\n          \".write\": \"auth != null && $userId === auth.uid\",\r\n          \"$notificationId\": {\r\n            \".validate\": \"newData.hasChildren(['type', 'message', 'createdAt'])\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"faculty\": {\r\n      \"$uid\": {\r\n        \".read\": \"auth != null && ($uid === auth.uid || root.child('admins').child(auth.uid).exists())\",\r\n        \".write\": \"auth != null && (root.child('admins').child(auth.uid).exists() || $uid === auth.uid)\"\r\n      }\r\n    },\r\n    \"admins\": {\r\n      \"$uid\": {\r\n        \".read\": \"auth != null && ($uid === auth.uid || root.child('admins').child(auth.uid).exists())\",\r\n        \".write\": \"auth != null && root.child('admins').child(auth.uid).exists()\"\r\n      }\r\n    }\r\n  }\r\n}"
        }
    ]
}